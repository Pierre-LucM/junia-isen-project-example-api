name: Install python dependency

on:
    workflow_call:


jobs:
    install-python-dependency:
        runs-on: ubuntu-latest
        steps:            
            # Check if Python is installed and exit if not
            # Purpose: Check if the specified Python versions are installed on the runner. If not, exit the workflow. note: The workflow will exit if any of the specified Python versions are not installed.
          - name: Check if Python is installed and exit if not
            run: |
                python_version=("3")
                for version in "${python_version[@]}"; do
                  if ! command -v python$version &> /dev/null; then
                    echo "Python $version could not be found"
                    exit 1
                  fi
                done

          - name: Create env file
            run: |
                echo "COSMOS_ENDPOINT=${{ secrets.COSMOS_ENDPOINT }}" >> $PWD/.env
                echo "COSMOS_KEY=${{ secrets.COSMOS_KEY }}" >> $PWD/.env

          # Install uv
          # Purpose: uv is a dependency manager and tool for managing Python projects.
          - name: Install uv
            run: pip install uv

          # Install dependencies and create virtual environment
          # Purpose: Install dependencies and create a virtual environment for the project.
          - name: Install dependencies and create virtual environment
            run: uv sync 
